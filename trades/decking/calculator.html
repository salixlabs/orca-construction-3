<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decks Estimator</title>
    <link rel="stylesheet" href="../../css/main.css">
    <script>
        // Check if logged in
        if (localStorage.getItem('orcaLoggedIn') !== 'true') {
            window.location.href = '/';
        }
    </script>
</head>
<body>
    <div class="container">
        <header class="site-header">
            <div class="logo">
                <img src="../../Assets/logo/ORE-horizontal-full.png" alt="Orca Roofing & Exteriors Logo">
            </div>
            <h1>Orca Roofing & Exteriors Decks Calculator</h1>
            <button class="reset-button" onclick="resetCalculator()">Reset</button>
        </header>
        
        <div class="main-layout">
            <div class="left-column">
                <div class="section">
                    <h2>Measurements</h2>
                    <div class="form-group">
                        <label for="firstFloorSF">Total SF (Ground Level):</label>
                        <input type="number" id="firstFloorSF" required>
                    </div>
                    <div class="form-group">
                        <label for="secondFloorSF">Total SF (2nd Story):</label>
                        <input type="number" id="secondFloorSF" required>
                    </div>
                    <div class="form-group">
                        <label for="railingLF">Total Railing LF:</label>
                        <input type="number" id="railingLF" required>
                    </div>
                    <div class="form-group">
                        <label for="steps">Number of Steps:</label>
                        <input type="number" id="steps" required>
                    </div>
                </div>

                <div class="section">
                    <h2>Ground Level Decking <span class="section-total" id="firstLevelTotal">$0.00</span></h2>
                    <div class="form-group">
                        <label class="radio-label">
                            <input type="radio" name="firstLevel" value="cedar4" data-price="44">
                            <span>Cedar - 4" ($44/SF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="firstLevel" value="cedar6" data-price="48">
                            <span>Cedar - 6" ($48/SF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="firstLevel" value="timberTechPrime" data-price="59">
                            <span>TimberTech - Prime Plus ($59/SF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="firstLevel" value="timberTechLandmark" data-price="71">
                            <span>TimberTech - Landmark ($71/SF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="firstLevel" value="timberTechVintage" data-price="81">
                            <span>TimberTech - Vintage PVC ($81/SF)</span>
                        </label>
                    </div>
                </div>

                <div class="section">
                    <h2>Railings <span class="section-total" id="railingsTotal">$0.00</span></h2>
                    <div class="form-group">
                        <label class="radio-label">
                            <input type="radio" name="railing" value="cedar" data-price="63">
                            <span>Cedar ($63/LF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="railing" value="cedarHog" data-price="69">
                            <span>Cedar / Hog Wire ($69/LF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="railing" value="cableCedar" data-price="110">
                            <span>Cable + Cedar Posts ($110/LF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="railing" value="composite" data-price="151">
                            <span>Composite ($151/LF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="railing" value="aluminum" data-price="153">
                            <span>Aluminum ($153/LF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="railing" value="glass" data-price="208">
                            <span>Glass ($208/LF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="railing" value="cableAluminum" data-price="213">
                            <span>Cable + Aluminum Posts ($213/LF)</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="right-column">
                <div class="section">
                    <h2>Framing & Options <span class="section-total" id="optionsTotal">$0.00</span></h2>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="pressureTreated" data-price="26">
                            <span>Ground Level Framing ($26/SF)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="secondStoryFraming" data-price="38">
                            <span>Second Story Framing ($38/SF)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="stairs" data-price="255">
                            <span>Stairs ($255 each)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="dumpFee" data-price="6">
                            <span>Demo Existing Deck + Dump Fee ($6/SF)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="rainEscape" data-price="28">
                            <span>Under Deck Water Catch System ($28/SF)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="permits" data-price="4000">
                            <span>Plans & Permits ($4,000)</span>
                        </label>
                    </div>
                </div>

                <div class="section">
                    <h2>Second Story Decking <span class="section-total" id="secondLevelTotal">$0.00</span></h2>
                    <div class="form-group">
                        <label class="radio-label">
                            <input type="radio" name="secondLevel" value="cedar4_2" data-price="54">
                            <span>Cedar - 4" ($54/SF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="secondLevel" value="cedar6_2" data-price="58">
                            <span>Cedar - 6" ($58/SF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="secondLevel" value="timberTechPrime2" data-price="69">
                            <span>TimberTech - Prime Plus ($69/SF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="secondLevel" value="timberTechLandmark2" data-price="81">
                            <span>TimberTech - Landmark ($81/SF)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="secondLevel" value="timberTechVintage2" data-price="91">
                            <span>TimberTech - Vintage PVC ($91/SF)</span>
                        </label>
                    </div>
                </div>

                <div class="section cost-summary">
                    <div class="section-header">
                        <h2>Cost Breakdown</h2>
                    </div>
                    <div id="result">
                        <p class="summary-item"><strong>Total Square Footage:</strong> <span class="value">0 SF</span></p>
                        <p class="summary-item"><strong>Total Railing Length:</strong> <span class="value">0 LF</span></p>
                        <p class="summary-item"><strong>Number of Steps:</strong> <span class="value">0</span></p>
                        <p class="total-cost"><strong>Total Estimated Cost:</strong> <span class="value">$0.00</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Calculator functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners to all inputs
            document.querySelectorAll('input').forEach(input => {
                input.addEventListener('change', calculateTotal);
            });

            // Initial calculation
            calculateTotal();
        });

        function calculateTotal() {
            // Get measurements
            const firstFloorSF = parseFloat(document.getElementById('firstFloorSF').value) || 0;
            const secondFloorSF = parseFloat(document.getElementById('secondFloorSF').value) || 0;
            const railingLF = parseFloat(document.getElementById('railingLF').value) || 0;
            const steps = parseFloat(document.getElementById('steps').value) || 0;

            // Get selected options and their prices
            let firstLevelPrice = getSelectedRadioPrice('firstLevel');
            let secondLevelPrice = getSelectedRadioPrice('secondLevel');
            let railingPrice = getSelectedRadioPrice('railing');

            // Calculate section totals
            let firstLevelTotal = firstFloorSF * firstLevelPrice;
            let secondLevelTotal = secondFloorSF * secondLevelPrice;
            let railingsTotal = railingLF * railingPrice;
            let optionsTotal = calculateOptionsTotal(firstFloorSF, secondFloorSF, steps);

            // Update section totals
            document.getElementById('firstLevelTotal').textContent = formatPrice(firstLevelTotal);
            document.getElementById('secondLevelTotal').textContent = formatPrice(secondLevelTotal);
            document.getElementById('railingsTotal').textContent = formatPrice(railingsTotal);
            document.getElementById('optionsTotal').textContent = formatPrice(optionsTotal);

            // Update cost breakdown
            updateCostBreakdown(firstFloorSF, secondFloorSF, railingLF, steps, 
                              firstLevelTotal, secondLevelTotal, railingsTotal, optionsTotal);
        }

        function getSelectedRadioPrice(name) {
            const selected = document.querySelector(`input[name="${name}"]:checked`);
            return selected ? parseFloat(selected.dataset.price) : 0;
        }

        function calculateOptionsTotal(firstFloorSF, secondFloorSF, steps) {
            let total = 0;

            // Ground Level Framing
            if (document.getElementById('pressureTreated').checked) {
                total += firstFloorSF * 26;
            }

            // Second Story Framing
            if (document.getElementById('secondStoryFraming').checked) {
                total += secondFloorSF * 38;
            }

            // Stairs
            if (document.getElementById('stairs').checked) {
                total += steps * 255;
            }

            // Demo and Dump Fee
            if (document.getElementById('dumpFee').checked) {
                total += (firstFloorSF + secondFloorSF) * 6;
            }

            // Water Catch System
            if (document.getElementById('rainEscape').checked) {
                total += secondFloorSF * 28;
            }

            // Permits
            if (document.getElementById('permits').checked) {
                total += 4000;
            }

            return total;
        }

        function updateCostBreakdown(firstFloorSF, secondFloorSF, railingLF, steps, 
                                   firstLevelTotal, secondLevelTotal, railingsTotal, optionsTotal) {
            const totalCost = firstLevelTotal + secondLevelTotal + railingsTotal + optionsTotal;
            const result = document.getElementById('result');

            result.innerHTML = `
                <p class="summary-item"><strong>Total Square Footage:</strong> <span class="value">${firstFloorSF + secondFloorSF} SF</span></p>
                <p class="summary-item"><strong>Total Railing Length:</strong> <span class="value">${railingLF} LF</span></p>
                <p class="summary-item"><strong>Number of Steps:</strong> <span class="value">${steps}</span></p>
                <p class="total-cost"><strong>Total Estimated Cost:</strong> <span class="value">${formatPrice(totalCost)}</span></p>
            `;
        }

        function formatPrice(price) {
            return '$' + price.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }

        function resetCalculator() {
            // Reset all inputs
            document.querySelectorAll('input[type="number"]').forEach(input => {
                input.value = '';
            });
            document.querySelectorAll('input[type="radio"]:checked').forEach(radio => {
                radio.checked = false;
            });
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                checkbox.checked = false;
            });

            // Recalculate totals
            calculateTotal();
        }
    </script>
</body>
</html> 